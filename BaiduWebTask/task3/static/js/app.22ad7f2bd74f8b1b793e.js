webpackJsonp([1,0],[function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}n(13);var a=n(21),s=o(a),i=n(14),d=o(i),c=n(16),r=o(c),l=n(15),u=o(l),h=n(1),f=o(h);window.bus=new s["default"];new s["default"]({el:".g-bd",components:{Category:d["default"],Todos:r["default"],Detail:u["default"],Edit:f["default"]}})},function(t,e,n){var o,a;n(10),o=n(4);var s=n(18);a=o=o||{},"object"!=typeof o["default"]&&"function"!=typeof o["default"]||(a=o=o["default"]),"function"==typeof a&&(a=a.options),a.render=s.render,a.staticRenderFns=s.staticRenderFns,a._scopeId="data-v-2",t.exports=o},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(6),s=o(a),i=window.localStorage.GTDdata&&JSON.parse(window.localStorage.GTDdata)||[{name:"百度IFE项目",tasks:[{name:"task1",todos:[{name:"to-do 1",date:"2015-04-28",content:"完成task1的编码工作",completed:!1},{name:"to-do 2",date:"2015-04-28",content:"完成task2的编码工作",completed:!1},{name:"to-do 3",date:"2015-04-29",content:"完成task3的编码工作",completed:!1},{name:"to-do 4",date:"2015-04-29",content:"完成task4的编码工作",completed:!1},{name:"to-do 5",date:"2015-04-30",content:"完成task5的编码工作",completed:!1},{name:"to-do 6",date:"2015-04-30",content:"完成task6的编码工作",completed:!1}]},{name:"task2",todos:[{name:"to-do 1",date:"2015-04-28",content:"完成task7的编码工作",completed:!1},{name:"to-do 2",date:"2015-04-28",content:"完成task8的编码工作",completed:!1},{name:"to-do 3",date:"2015-04-29",content:"完成task9的编码工作",completed:!1},{name:"to-do 4",date:"2015-04-29",content:"完成task10的编码工作",completed:!1}]}]},{name:"毕业设计",tasks:[{name:"毕业设计",todos:[{name:"完成开题报告",date:"2015-04-29",content:"完成开题报告的copy工作",completed:!1}]}]},{name:"社团活动",tasks:[{name:"出卖灵魂",todos:[{name:"出本子",date:"2015-04-29",content:"出扶她本子",completed:!1}]}]},{name:"家庭生活",tasks:[{name:"日常",todos:[{name:"打滚",date:"2015-04-29",content:"在床上抱着抱枕打滚",completed:!1}]}]},{name:"默认分类",tasks:[{name:"默认任务",todos:[{name:"发呆",date:"2015-04-29",content:"只是在发呆而已",completed:!1}]}]}];e["default"]={data:function(){return{categories:i,selectedIndex:{category:i.length-1,categorySpread:[i.length-1],task:0}}},computed:{tasks:function(){return this.categories&&this.categories[this.selectedIndex.category]&&this.categories[this.selectedIndex.category].tasks},todos:function(){return this.tasks&&this.tasks[this.selectedIndex.task]&&this.tasks[this.selectedIndex.task].todos},categoryTodoNum:function(){var t=[],e=this;return this.categories.forEach(function(n){var o=0;n.tasks.forEach(function(t){o+=e.unCompletedNum(t.todos)}),t.push(o)}),t},totalTodoNum:function(){return this.categoryTodoNum.length>0?this.categoryTodoNum.reduce(function(t,e){return t+e}):0}},watch:{categories:function(){bus.$emit("saveData")},todos:function(t){bus.$emit("upDateTodos",t)}},methods:{unCompletedNum:function(t){var e=0;return t.forEach(function(t){t.completed||e++}),e},categoryClick:function(t){t!==this.selectedIndex.category&&(this.selectedIndex.category=t);var e=this.selectedIndex.categorySpread.indexOf(t);e<0?this.selectedIndex.categorySpread.push(t):this.selectedIndex.categorySpread.splice(e,1),this.selectedIndex.task=0,this.selectTask(t,this.selectedIndex.task)},isShow:function(t,e){return this.selectedIndex.categorySpread.indexOf(t)>=0&&e.length>=0},deleteCategory:function(t){if(t===this.categories.length-1)alert("默认分类不能删除");else{var e=confirm("确认要删除这个分类吗");e&&this.categories.splice(t,1),t===this.selectedIndex.category&&(this.selectedIndex.category=this.categories.length-1),this.selectedIndex.categorySpread.forEach(function(t,e,n){e<=t&&n[e]--}),t<=this.selectedIndex.category&&this.selectedIndex.category--}},selectTask:function(t,e){this.selectedIndex.category=t,this.selectedIndex.task=e},isSelected:function(t,e){return t===this.selectedIndex.category&&e===this.selectedIndex.task},addTask:function(){if(this.selectedIndex.category===this.categories.length-1)alert("默认分类不能添加子分类");else{var t=prompt("请输入子分类名称","task1");null!==t&&""!==t&&this.categories[this.selectedIndex.category].tasks.push({name:t,todos:[]}),this.selectedIndex.task=this.categories[this.selectedIndex.category].tasks.length-1}}},created:function(){function t(){window.localStorage.setItem("GTDdata",(0,s["default"])(this.categories))}bus.$on("saveData",t.bind(this))},mounted:function(){bus.$emit("upDateTodos",this.todos)}}},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(1),s=o(a),i={content:"content",create:"create",edit:"edit"};e["default"]={data:function(){return{details:{},curMode:i.content}},created:function(){var t=this;bus.$on("upDateDetails",function(e){t.details=e,bus.$emit("saveData")}),bus.$on("confirm",function(e,n){if("edit"===n){for(var o in e)t.details[o]=e[o];bus.$emit("saveData")}t.curMode=i.content}),bus.$on("cancel",function(){t.curMode=i.content}),bus.$on("createNew",function(){t.curMode=i.create})},methods:{complete:function(t){var e=confirm("确认要完成这项任务吗？");e&&(t.completed=!0)},editTodo:function(){this.curMode=i.edit}},components:{Edit:s["default"]}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]={props:{editProp:{type:Object},curMode:{type:String,"default":"create"}},data:function n(){var n={};for(var t in this.editProp)n[t]=this.editProp[t];return{data:n,titleName:{create:"新建任务",edit:"编辑任务"},validText:{name:"",date:"",content:""},validRules:{name:"^.{1,20}$",date:"^\\d{4}-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])$",content:"^.{1,100}$"},validHint:{name:"任务名称不得超过20个字符",date:"请输入为格式yyyy-mm--dd的合法日期",content:"任务具体内容不得超过100个字符"}}},methods:{confirm:function(){this.validName()&&this.validDate()&&this.validContent()&&bus.$emit("confirm",this.data,this.curMode)},cancel:function(){bus.$emit("cancel")},validName:function(){var t=this.data.name;return new RegExp(this.validRules.name).test(t)?(this.validText.name="",!0):(t?this.validText.name=this.validHint.name:this.validText.name="请输入任务名称",!1)},validDate:function(){var t=this.data.date;return new RegExp(this.validRules.date).test(t)&&new Date(t).getDate()==t.substring(t.length-2)?(this.validText.date="",!0):(t?this.validText.date=this.validHint.date:this.validText.date="请输入任务完成日期",!1)},validContent:function(){var t=this.data.content;return new RegExp(this.validRules.content).test(t)?(this.validText.content="",!0):(t?this.validText.content=this.validHint.content:this.validText.content="请输入任务具体内容",!1)}}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]={data:function(){return{todos:[],selectedIndex:0,showMode:0}},created:function(){var t=this;bus.$on("upDateTodos",function(e){t.todos=e,bus.$emit("saveData")}),bus.$on("confirm",function(e,n){"create"===n&&(t.todos.push(e),t.sort(),bus.$emit("saveData"))})},computed:{details:function(){return this.todos&&this.todos[this.selectedIndex]}},watch:{details:function(t){bus.$emit("upDateDetails",t)}},methods:{isShow:function(t){return!this.showMode||(1===this.showMode?!t.completed:t.completed)},isDateShow:function(){var t=[];return function(e,n){return n||(t=[]),!(t.indexOf(e.date)>=0)&&(t.push(e.date),this.isShow(e)&&!0)}}(),createNewTodo:function(){bus.$emit("createNew")},sort:function(){this.todos.sort(function(t,e){return new Date(t.date)>new Date(e.date)})}}}},,,,function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e,n){var o,a;n(9),o=n(2);var s=n(17);a=o=o||{},"object"!=typeof o["default"]&&"function"!=typeof o["default"]||(a=o=o["default"]),"function"==typeof a&&(a=a.options),a.render=s.render,a.staticRenderFns=s.staticRenderFns,t.exports=o},function(t,e,n){var o,a;n(12),o=n(3);var s=n(20);a=o=o||{},"object"!=typeof o["default"]&&"function"!=typeof o["default"]||(a=o=o["default"]),"function"==typeof a&&(a=a.options),a.render=s.render,a.staticRenderFns=s.staticRenderFns,t.exports=o},function(t,e,n){var o,a;n(11),o=n(5);var s=n(19);a=o=o||{},"object"!=typeof o["default"]&&"function"!=typeof o["default"]||(a=o=o["default"]),"function"==typeof a&&(a=a.options),a.render=s.render,a.staticRenderFns=s.staticRenderFns,t.exports=o},function(module,exports){module.exports={render:function(){with(this)return _h("div",{staticClass:"m-category"},[_h("div",[_h("p",{staticClass:"category-all"},["所有任务  ("+_s(totalTodoNum)+")"])," ",_m(0)," ",_l(categories,function(t,e){return _h("ul",{staticClass:"category-list"},[_h("li",{staticClass:"category-item"},[_m(1),_h("span",{on:{click:function(t){categoryClick(e)}}},[_s(t.name)+"  ("+_s(categoryTodoNum[e])+")"])," ",_h("i",{staticClass:"delete",on:{click:function(t){deleteCategory(e)}}})," ",_l(t.tasks,function(t,n){return _h("ul",[_h("li",{directives:[{name:"show",value:isShow(e,t.todos),expression:"isShow(index,task.todos)"}],"class":{selected:isSelected(e,n)},on:{click:function(t){selectTask(e,n)}}},[_m(2),_s(t.name)+"  ("+_s(unCompletedNum(t.todos))+")\n\t\t\t\t\t"])])})])])})])," ",_h("div",{staticClass:"category-add",on:{click:addTask}},[_m(3),_m(4)])])},staticRenderFns:[function(){with(this)return _h("p",["分类列表"])},function(){with(this)return _h("i",{staticClass:"folder"})},function(){with(this)return _h("i",{staticClass:"file"})},function(){with(this)return _h("i",{staticClass:"add"})},function(){with(this)return _h("span",["新增分类"])}]}},function(module,exports){module.exports={render:function(){with(this)return _h("form",{staticClass:"detail-edit"},[_h("h1",[_s(titleName[curMode])])," ",_h("label",["任务名称",_h("input",{directives:[{name:"model",value:data.name,expression:"data.name"}],attrs:{type:"text",name:"title",placeholder:"请输入任务名称"},domProps:{value:_s(data.name)},on:{blur:validName,focus:function(t){validText.name=""},input:function(t){t.target.composing||(data.name=t.target.value)}}})," ",_h("p",[_s(validText.name)])])," ",_h("label",["完成日期",_h("input",{directives:[{name:"model",value:data.date,expression:"data.date"}],attrs:{type:"text",name:"date",placeholder:"请按yyyy-mm-dd的格式输入日期"},domProps:{value:_s(data.date)},on:{blur:validDate,focus:function(t){validText.date=""},input:function(t){t.target.composing||(data.date=t.target.value)}}})," ",_h("p",[_s(validText.date)])])," ",_h("label",["具体内容",_h("textarea",{directives:[{name:"model",value:data.content,expression:"data.content"}],attrs:{rows:"3",cols:"10",placeholder:"请输入任务内容"},domProps:{value:_s(data.content)},on:{blur:validContent,focus:function(t){validText.content=""},input:function(t){t.target.composing||(data.content=t.target.value)}}})," ",_h("p",[_s(validText.content)])])," ",_h("button",{on:{click:function(t){t.stopPropagation(),t.preventDefault(),confirm(t)}}},["确认"]),_h("button",{on:{click:function(t){t.stopPropagation(),t.preventDefault(),cancel(t)}}},["取消"])])},staticRenderFns:[]}},function(module,exports){module.exports={render:function(){with(this)return _h("div",{staticClass:"m-todos"},[_h("p",[_h("span",{"class":{selected:0===showMode},on:{click:function(t){showMode=0}}},["所有"])," ",_h("span",{"class":{selected:1===showMode},on:{click:function(t){showMode=1}}},["未完成"])," ",_h("span",{"class":{selected:2===showMode},on:{click:function(t){showMode=2}}},["已完成"])])," ",_l(todos,function(t,e){return _h("ul",[_h("li",{directives:[{name:"show",value:isDateShow(t,e),expression:"isDateShow(todo,index)"}],staticClass:"todos-date"},[_s(t.date)])," ",_h("li",{directives:[{name:"show",value:isShow(t),expression:"isShow(todo)"}],staticClass:"todos-item","class":{selected:selectedIndex===e,completed:t.completed},on:{click:function(t){selectedIndex=e}}},[_s(t.name)])])})," ",_h("div",{staticClass:"todos-add",on:{click:createNewTodo}},[_m(0),_m(1)])])},staticRenderFns:[function(){with(this)return _h("i",{staticClass:"add"})},function(){with(this)return _h("span",["新增任务"])}]}},function(module,exports){module.exports={render:function(){with(this)return _h("div",{staticClass:"m-detail"},["content"!==curMode?_h("Edit",{attrs:{"edit-prop":"edit"===curMode?details:null,curMode:curMode}}):_e()," ","content"===curMode?_h("div",[_h("div",{staticClass:"detail-title"},[_h("h1",[_s(details&&details.name)]),_h("i",{staticClass:"edit",on:{click:editTodo}}),_h("i",{staticClass:"complete",on:{click:function(t){complete(details)}}})])," ",_h("div",{staticClass:"detail-date"},[_h("p",["任务日期："+_s(details&&details.date)])])," ",_h("div",{staticClass:"detail-content"},[_h("p",[_s(details&&details.content)])])]):_e()])},staticRenderFns:[]}}]);
//# sourceMappingURL=app.22ad7f2bd74f8b1b793e.js.map